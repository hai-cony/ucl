<!-- Autogenerated guidance for AI coding agents. Edit only to add repo-specific notes. -->
# Copilot instructions for this repository

Purpose: give an AI coding assistant the immediate, practical knowledge
to be productive in this Next.js + Supabase project.

Quick summary
- Framework: Next.js (app directory / Server Components by default).
- Styling: Tailwind CSS (v4) + `tw-animate-css` and PostCSS.
- Auth/DB: Supabase via `lib/supabase.ts` (uses `NEXT_PUBLIC_SUPABASE_URL` and `NEXT_PUBLIC_SUPABASE_ANON_KEY`).
- Package manager: repository uses `package.json` scripts; `pnpm` is used by the developer (README lists `pnpm dev` as an option).

Key locations
- `app/` — Next 13+ App Router; pages and server components live here. Example pages: `app/inventory`, `app/purchasing`.
- `app/api/**/route.ts` — Server route handlers (use `NextResponse` or `Response.json`). Some routes use the Supabase client (`app/api/purchasing/suppliers/route.ts`).
- `components/ui/` — Shared UI primitives (Button, Table, Input, etc.). These use Tailwind, `class-variance-authority` (`cva`), and the `cn` helper.
- `lib/supabase.ts` — Single Supabase client instance. Import with `@/lib/supabase`.
- `lib/utils.ts` — `cn` (clsx + tailwind-merge) helper used across UI components.
- `components/` and `app/` use the path alias `@/*` (configured in `tsconfig.json`).

Architecture notes & common patterns
- Server vs Client components: files in `app/` default to server components. Components that run in the browser include a top-line `"use client"` (see `components/ui/table.tsx`). When adding client-side logic, add `"use client"` and keep side-effect code minimal.
- Data flow: UI pages call the internal API routes under `app/api/*` which either return dummy data (see `app/api/inventory/route.ts`) or call Supabase (`app/api/purchasing/suppliers/route.ts`). Prefer server routes for operations that require secrets or server-only Supabase usage.
- Supabase usage: import the shared client `import { supabase } from "@/lib/supabase"` within server routes. Env vars used are `NEXT_PUBLIC_SUPABASE_URL` and `NEXT_PUBLIC_SUPABASE_ANON_KEY` — these are public anon keys; avoid committing any private keys into the repo.
- UI primitives: follow existing component patterns — use `cva` for variant classes and `cn(...)` for merging classes. Buttons expose `variant` and `size` props (see `components/ui/button.tsx`). Keep `data-slot` attributes where present (used for structured queries/testing).
- API responses: routes sometimes use `NextResponse.json(...)` and sometimes `Response.json(...)`. Both are acceptable in server routes, but prefer `NextResponse` for consistency if you interact with Next-specific features.

Developer workflows
- Dev server: `pnpm dev` (fallbacks: `npm run dev`, `yarn dev`).
- Build: `pnpm build` / `npm run build`.
- Start production preview: `pnpm start` / `npm run start`.
- Lint: `pnpm lint` (runs `eslint`).

Project-specific conventions
- Keep comments and inline notes consistent with existing tone — this repo includes Indonesian comments in some API routes; avoid changing natural-language comments unless correcting factual errors.
- File names and exports: UI primitives export named components (e.g., `export { Button, buttonVariants }`). Follow named exports to avoid default-import mismatch.
- Path alias: use `@/...` imports throughout — do not switch to relative imports when adding new files unless the file is intentionally isolated.
- Styles: prefer Tailwind utility classes and the `cn` helper instead of concatenating strings.

When editing or adding API routes
- Place new server handlers under `app/api/<resource>/route.ts`.
- For DB operations, import `supabase` from `@/lib/supabase` and return `Response.json(data)` or `NextResponse.json(data)`.
- Validate request bodies in POST/PUT handlers before inserting into Supabase — there are no global validators enforced in this repo.

Examples
- Read supabase client: `import { supabase } from "@/lib/supabase"` (see `app/api/purchasing/suppliers/route.ts`).
- UI Button variant usage: `buttonVariants({ variant: 'destructive', size: 'sm' })` (see `components/ui/button.tsx`).
- Client component pattern: add `"use client"` at file top when using state or hooks (see `components/ui/table.tsx`).

Editing guidance for AI agents
- Make minimal, focused changes. Preserve project style (Tailwind + `cn`, `cva`) and path aliases.
- Prefer to run the dev server locally to verify UI changes. If editing API routes, test endpoints with `curl` or a browser at `http://localhost:3000/api/<path>`.
- Do not add or expose secret keys. If a change requires secrets (service role keys), ask the human maintainer.

If you modify this file: leave a short changelog entry at the top describing why the update was needed.

— End of instructions —
